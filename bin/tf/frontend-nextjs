#! /usr/bin/bash

set -e # stop execution if anything fails

# build frontend files by sourcing build file and running functions
buildFilepath="$ABS_PATH/bin/frontend-nextjs/build"
source $buildFilepath

# don't run the static sync 
install
build
artifacts

abs_filepath="$ABS_PATH/terraform/frontend-nextjs"
FilePath=$(realpath --relative-base="$PWD" "$abs_filepath")

cd $FilePath

terraform validate
tflint
terraform apply -auto-approve

